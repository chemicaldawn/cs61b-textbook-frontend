---
import { getCollection } from "astro:content";
import Pagemap from "../../../components/server/pagemap.astro"

export async function getStaticPaths() {
    const textbook = await getCollection('textbook')
    return textbook.map((page) => {
        let chapterName = page.data.section.toString().substring(0,1)
        return {
            params : {
                chapter : chapterName,
                slug : page.id
            },
            props : {
                slug: page.id
            }
        }
    })
}

const { slug } = Astro.props
---
<Pagemap slug={slug} />